{%- if use_mkdocs -%}
# Build the documentation.
[group('docs')]
build-docs:
    uv run mkdocs build

# Serves the documentation on a local webserver.
[group('docs')]
serve-docs:
    uv run mkdocs serve --watch ./src

# Runs the main application with the given arguments.
[group('app')]
[positional-arguments]
run-app *ARGS:
    uv run "{{ project_name }}" "$@"

# Runs the full test suite.
[group('tests')]
[positional-arguments]
run-tests *PYTEST_FLAGS:
    uv run pytest "$@"

# Runs the full test suite whenever a file changes.
[group('tests')]
watch-tests *PYTEST_FLAGS:
    #!/usr/bin/env bash
    # 2 is the return value when a new file was added.
    while true; do
        fd -e py | entr -cd just run-tests {{ PYTEST_FLAGS }}
        if [ "$?" -ne 2 ] ; then
            break
        fi
        sleep 0.5
    done
{%- endif %}

# Run the pre-commit hook manually.
[group('ci')]
run-pre-commit:
    uv run pre-commit run

# Run the pre-commit hook manually on all files.
[group('ci')]
run-pre-commit-all:
    uv run pre-commit run --all

{%- if use_github_workflow +%}
# Run the GitHub Actions workflows locally.
[group('ci')]
run-workflows:
    act
{%- endif %}
{#
vim: syntax=just
#}
